<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>Wasm Test</title>
</head>

<body>
  <script type="module">
    import init, { hashes } from "./pkg/gca_rust.js";
    init().then(() => {
      const rand = crypto.getRandomValues(new Uint8Array(32))
      const iters = 1000000
      const start = performance.now()
      let result;
      for (let i = 0; i < iters; i++) {
        result = hashes(rand)
      }
      const end = performance.now()

      console.log(`Done in ${end - start}ms or ${((end - start)*1000 / iters).toFixed(4)}Î¼s on average`)
      console.log(`Last value: ${result}`);
    });
  </script>
</body>

</html>
